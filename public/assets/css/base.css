/* Sansation local */
@font-face{
  font-family:"Sansation";
  src: url("../fonts/Sansation-Regular.woff2") format("woff2");
  font-weight:400;
  font-style:normal;
  font-display:swap;
}
@font-face{
  font-family:"Sansation";
  src: url("../fonts/Sansation-Bold.woff2") format("woff2");
  font-weight:700;
  font-style:normal;
  font-display:swap;
}

/* ===== Reset + fuente ===== */
*{box-sizing:border-box}
html,body{min-height:100%}
html{background:var(--bg)}
body{
  margin:0;
  min-height:100vh;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  line-height:1.5;
  font-size:16px;
  position:relative;

  isolation:isolate;
  overflow-x:hidden;
  background:radial-gradient(circle at top, color-mix(in oklab, var(--surface) 75%, white) 0%, var(--bg) 45%, color-mix(in oklab, var(--surface) 65%, var(--bg)) 100%);
  color:var(--text);
}

/* ===== Tokens (tema claro por defecto) ===== */
:root{
  --radius:18px;
  --shadow:0 18px 45px rgba(15, 23, 42, 0.12);
  --transition:.22s ease;
  --content-max:1200px;
  --aurora-opacity:.18;
  --aurora-blur:90px;

  /* Colores base (ajustables con JS) */
  --brand:#7c3aed;  /* violeta moderno */
  --accent:#22c55e;

  /* Neutros (claro) */
  --bg:#eef1f6;
  --surface:#fff;
  --text:#0f172a;
  --muted:#6b7280;
  --border:#e5e7eb;

  /* Derivados */
  --primary:var(--brand);
  --primary-contrast:#fff;
}

/* ===== Tema oscuro (neutral/gris) ===== */
:root[data-theme="dark"]{
  --bg:#0e0f13;
  --surface:#15161c;
  --text:#e6e7eb;
  --muted:#a1a1aa;
  --border:#23252d;
  --aurora-opacity:.12;

  --brand:#a78bfa;
  --accent:#34d399;

  --primary:var(--brand);
  --primary-contrast:#0e0f13;
}

html[data-theme="dark"] body{
  background:radial-gradient(circle at top, color-mix(in oklab, var(--surface) 55%, var(--bg)) 0%, var(--bg) 45%, color-mix(in oklab, var(--surface) 65%, var(--bg)) 100%);
}

body::before,
body::after{
  content:"";
  position:fixed;
  width:720px;
  height:720px;
  border-radius:999px;
  filter:blur(var(--aurora-blur));
  opacity:var(--aurora-opacity);
  pointer-events:none;
  z-index:0;
}
body::before{
  left:-280px;
  top:-360px;
  background:color-mix(in oklab, var(--primary) 55%, transparent);
}
body::after{
  right:-320px;
  bottom:-380px;
  background:color-mix(in oklab, var(--accent) 55%, transparent);
}
body > *{
  position:relative;
  z-index:1;
}

nav#appMenu,
div#appMenu{
  position:relative;
  z-index:2000;
}

/* ===== Links ===== */
a{color:var(--primary);text-decoration:none}
a:hover{text-decoration:underline}

/* ===== Tipografía ===== */
h1{font-size:2.1rem;letter-spacing:-0.02em;margin:0 0 1rem 0}
h2{font-size:1.6rem;letter-spacing:-0.01em;margin:0 0 .75rem 0}
h3{font-size:1.25rem;margin:0 0 .65rem 0}
p{margin:0 0 1rem 0;color:var(--text)}
small, .muted{color:var(--muted)}

/* ===== Layout ===== */
.container{max-width:var(--content-max);margin:2rem auto;padding:0 1.5rem; padding-bottom: 5rem;}
.card{
  background:var(--surface);
  border:1px solid color-mix(in oklab, var(--border) 80%, transparent);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:1.5rem;
   position:relative;
  overflow:hidden;
}
.card::before{
  content:"";
  position:absolute;
  left:0;
  right:0;
  top:0;
  height:3px;
  background:linear-gradient(90deg,
    color-mix(in oklab, var(--primary) 85%, white),
    color-mix(in oklab, var(--accent) 75%, white)
  );
  opacity:.75;
}
.card::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background:
    radial-gradient(520px 320px at 12% 18%, color-mix(in oklab, var(--primary) 12%, transparent), transparent 62%),
    radial-gradient(520px 320px at 88% 82%, color-mix(in oklab, var(--accent) 10%, transparent), transparent 60%);
  opacity:.7;
  
}

/* ===== Botones ===== */
.btn{
  --bg:var(--surface); --fg:var(--text); --bd:var(--border);
  display:inline-flex;align-items:center;gap:.5rem;
  padding:.75rem 1.1rem;border-radius:calc(var(--radius) - 6px);border:1px solid var(--bd);
  background:var(--bg);color:var(--fg);cursor:pointer;
  transition:transform var(--transition), box-shadow var(--transition), background var(--transition), border-color var(--transition), color var(--transition);
  will-change:transform;
}
.btn:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(0,0,0,.08)}
.btn:active{transform:translateY(0)}
.btn:focus{outline:none;box-shadow:0 0 0 3px color-mix(in oklab, var(--primary) 25%, transparent)}

.btn-primary{
  --bg:linear-gradient(180deg, color-mix(in oklab, var(--primary) 92%, white), color-mix(in oklab, var(--primary) 90%, black));
  --fg:var(--primary-contrast); --bd:transparent;
}
.btn-neutral{ --bg:color-mix(in oklab, var(--surface) 70%, var(--bg)); --fg:var(--text) }
.btn-tonal{
  --bg:color-mix(in oklab, var(--primary) 18%, var(--surface));
  --fg:color-mix(in oklab, var(--primary) 80%, var(--text));
  --bd:color-mix(in oklab, var(--primary) 28%, var(--border));
}
.btn-soft{
  --bg:color-mix(in oklab, var(--primary) 12%, transparent);
  --fg:color-mix(in oklab, var(--primary) 80%, var(--text));
  --bd:color-mix(in oklab, var(--primary) 30%, var(--border));
}
.btn-outline{background:transparent;color:var(--primary);border-color:var(--primary)}
.btn-ghost{background:transparent;border-color:var(--border)}
.btn.round{border-radius:999px}
.btn-icon{padding:.6rem;width:2.5rem;justify-content:center}
.btn-danger{ --bg:#ef4444; --fg:#fff; --bd:transparent }
.btn-success{ --bg:#16a34a; --fg:#fff; --bd:transparent }

/* Hover glow del primario */
.btn-primary:hover{
  filter:none; transform:translateY(-1px) scale(1.02);
  box-shadow:0 10px 28px color-mix(in oklab, var(--primary) 45%, transparent), 0 0 0 2px color-mix(in oklab, var(--primary) 35%, transparent) inset;
}

/* ===== Formularios ===== */
.input, textarea{
  width:100%;padding:.75rem .9rem;border:1px solid var(--border);
  border-radius:var(--radius);background:var(--surface);color:var(--text);
  transition:border-color var(--transition), box-shadow var(--transition)
}
.input:focus,textarea:focus{
  outline:none;border-color:var(--primary);
  box-shadow:0 0 0 3px color-mix(in oklab, var(--primary) 25%, transparent)
}

/* ===== Select nativo — estilo clean ===== */
.field{margin:1rem 0}
.label{display:block;font-weight:600;margin:0 0 .45rem 0}
.hint{display:block;margin-top:.35rem;color:var(--muted);font-size:.9rem}
.select-wrap{position:relative;display:block}
.select{
  appearance:none; -webkit-appearance:none;
  width:100%;
  padding:.95rem 2.6rem .95rem 1rem;
  border:1px solid var(--border);
  border-radius:var(--radius);
  background:var(--surface);
  color:var(--text);
  box-shadow: inset 0 1px 0 rgba(0,0,0,.02);
  transition: border-color .18s ease, box-shadow .18s ease, background .18s ease;
}
.select:hover{ background: color-mix(in oklab, var(--surface) 92%, var(--bg)) }
.select:focus{
  outline:none; border-color: var(--primary);
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--primary) 24%, transparent);
}
.select-lg{ font-size:1rem }
.select-wrap::after{
  content:""; position:absolute; top:50%; right:.8rem; width:1rem; height:1rem; transform:translateY(-50%);
  pointer-events:none; opacity:.9; background-repeat:no-repeat; background-size:100% 100%;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M6 9l6 6 6-6' fill='none' stroke='%239ca3af' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
}
:root[data-theme="dark"] .select-wrap::after{
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M6 9l6 6 6-6' fill='none' stroke='%23a1a1aa' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
}

/* ===== Tabla ===== */
.table{width:100%;border-collapse:collapse;background:var(--surface);border-radius:var(--radius);overflow:hidden}
.table th,.table td{border:1px solid var(--border);padding:.75rem .85rem}
.table th{
  background:color-mix(in oklab, var(--surface) 70%, var(--bg));
  text-align:left;
  font-weight:600;
}
.table tbody tr:nth-child(even){background:color-mix(in oklab, var(--surface) 92%, var(--bg))}

/* ===== Menú (con animación) ===== */
.menu{
  display:flex;
  gap:.6rem;
  align-items:center;
  padding:1rem 1.5rem;
  border-bottom:1px solid var(--border);
  background:var(--surface);
  box-shadow:0 10px 25px rgba(15, 23, 42, 0.06);
  position:relative;
  z-index:1000;
  overflow:visible;
}
.menu::before{
  content:"";
  position:absolute;
  left:0;
  right:0;
  top:0;
  height:3px;
  background:linear-gradient(90deg,
    color-mix(in oklab, var(--primary) 85%, white),
    color-mix(in oklab, var(--accent) 75%, white)
  );
  opacity:.85;
}
.menu-profile{
  display:flex;
  align-items:center;
  gap:.6rem;
  padding:.35rem .6rem;
  border-radius:999px;
  border:1px solid transparent;
  color:var(--text);
  font-weight:600;
}
.menu-profile:hover{
  text-decoration:none;
  border-color:color-mix(in oklab, var(--primary) 25%, transparent);
  background:color-mix(in oklab, var(--primary) 10%, transparent);
}
.menu-profile-name{
  display:inline-block;
  max-width:200px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.menu-avatar{
  width:34px;
  height:34px;
  border-radius:50%;
  object-fit:cover;
  border:1px solid var(--border);
  background:color-mix(in oklab, var(--surface) 70%, var(--bg));
}
.menu-avatar--fallback{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-size:.75rem;
  font-weight:700;
  color:color-mix(in oklab, var(--primary) 80%, var(--text));
  text-transform:uppercase;
}
.menu a{padding:.45rem .7rem;border-radius:.7rem;color:var(--text)}
.menu a.active{background:color-mix(in oklab, var(--primary) 16%, transparent)}
.menu .spacer{flex:1}
.menu a, .menu button{
  transition:transform .18s ease, box-shadow .18s ease, background .18s ease, color .18s ease;
  will-change:transform;
}

.menu-group{
  position:relative;
  padding-bottom:.35rem;
}
.menu-group__summary{
  list-style:none;
  cursor:pointer;
  padding:.45rem .7rem;
  border-radius:.7rem;
  color:var(--text);
  display:flex;
  align-items:center;
  gap:.35rem;
}
.menu-group__summary::-webkit-details-marker{display:none}
.menu-group__summary.active,
.menu-group[open] > .menu-group__summary{
  background:color-mix(in oklab, var(--primary) 16%, transparent);
}
.menu-group__chevron{
  font-size:.75rem;
  opacity:.7;
}
.menu-group__items{
  position:absolute;
  top:100%;
  left:0;
  display:flex;
  flex-direction:column;
  gap:.25rem;
  padding:.5rem;
  min-width:220px;
  border-radius:.9rem;
  border:1px solid var(--border);
  background:var(--surface);
  box-shadow:var(--shadow);
  z-index:1100;
}

/* ===== Loader global ===== */
.loading-overlay{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:color-mix(in oklab, var(--bg) 82%, transparent);
  backdrop-filter:blur(6px);
  opacity:0;
  pointer-events:none;
  transition:opacity .25s ease;
  z-index:9999;
}
.loading-overlay.is-visible{
  opacity:1;
  pointer-events:all;
}
.loading-card{
  background:var(--surface);
  border:1px solid color-mix(in oklab, var(--border) 85%, transparent);
  border-radius:24px;
  padding:1.6rem 2rem;
  box-shadow:var(--shadow);
  text-align:center;
  min-width:240px;
}
.loading-chick{
  font-size:3rem;
  display:block;
  filter:drop-shadow(0 10px 18px rgba(0,0,0,.15));
  animation:chick-bounce 1.05s ease-in-out infinite;
}
.loading-text{
  margin:.6rem 0 .3rem 0;
  font-weight:600;
}
.loading-dots{
  display:inline-flex;
  gap:.3rem;
}
.loading-dots span{
  width:.45rem;
  height:.45rem;
  border-radius:50%;
  background:color-mix(in oklab, var(--primary) 70%, var(--text));
  animation:dot-pulse 1s ease-in-out infinite;
}
.loading-dots span:nth-child(2){animation-delay:.2s}
.loading-dots span:nth-child(3){animation-delay:.4s}

@keyframes chick-bounce{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-10px)}
}
@keyframes dot-pulse{
  0%,100%{transform:scale(.6);opacity:.6}
  50%{transform:scale(1);opacity:1}
}
.menu a:hover, .menu button:hover{ transform:scale(1.05) rotate(.6deg) }
.menu a:active, .menu button:active{ transform:scale(.99) rotate(0) }

/* ===== Utils ===== */
.grid{display:grid;gap:1.25rem}
.grid.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
.grid.cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}
@media (max-width:760px){.grid.cols-2,.grid.cols-3{grid-template-columns:1fr}}

/* ===== Login centrado + animación ===== */
.center-screen{min-height:calc(100vh - 68px);display:flex;align-items:center;justify-content:center;padding:3rem}
.fx-pop{animation:pop-in .28s cubic-bezier(.2,.7,.3,1) both}
@keyframes pop-in{0%{opacity:0;transform:translateY(8px) scale(.98)}100%{opacity:1;transform:translateY(0) scale(1)}}
.login-card{width:min(420px,92vw)}
.login-card h3{margin:.25rem 0 1rem 0}
.login-card .input{margin-top:.25rem}
.login-actions{display:flex;gap:.6rem;justify-content:flex-end;margin-top:1rem}

/* ===== Reduce motion ===== */
@media (prefers-reduced-motion: reduce){
  .fx-pop, .menu a, .menu button, .btn-primary{ animation:none; transition:none }
}

/* Tipografías por tema (tokens) */
:root{
  --font-ui: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  --font-head: var(--font-ui);
}

/* Usar tokens en todo el UI */
html, body, button, input, select, textarea, table { font-family: var(--font-ui); }
h1, h2, h3, h4, .heading { font-family: var(--font-head); }


/* ===== Tutorial guiado ===== */
#menuTutorialBtn{
  white-space:nowrap;
}
.tutorial-overlay{
  position:fixed;
  inset:0;
  display:flex;
  align-items:flex-end;
  justify-content:flex-end;
  padding:1rem;
  background:color-mix(in oklab, var(--bg) 35%, transparent);
  backdrop-filter:blur(1px);
  opacity:0;
  pointer-events:none;
  transition:opacity .2s ease;
  z-index:2147483000;
}
.tutorial-overlay.is-visible{
  opacity:1;
  pointer-events:auto;
}
.tutorial-panel{
  width:min(420px, 100%);
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:20px;
  box-shadow:var(--shadow);
  padding:1rem;
  position:relative;
  z-index:2147483001;
}
.tutorial-close{
  position:absolute;
  right:.5rem;
  top:.5rem;
  border:none;
  background:transparent;
  color:var(--muted);
  cursor:pointer;
  font-size:1rem;
}
.tutorial-mascot-wrap{display:flex;justify-content:center;margin-top:.3rem;}
.tutorial-mascot{width:150px;height:150px;object-fit:contain;}
.tutorial-progress{font-size:.85rem;color:var(--muted);margin-bottom:.2rem}
.tutorial-title{margin:.25rem 0}
.tutorial-text{margin:0;color:var(--text); white-space:pre-line}
.tutorial-actions{display:flex;justify-content:space-between;gap:.5rem;margin-top:1rem}
.tutorial-highlight-target{
  position:relative;
  z-index:2147482990;
  outline:3px solid color-mix(in oklab, var(--primary) 65%, rgb(1, 217, 255));
  border-radius:12px;
  box-shadow:0 0 0 6px color-mix(in oklab, var(--primary) 16%, transparent);
}